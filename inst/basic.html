<html>
<head>
  <title>R/WebSockets</title>
</head>
<style type="text/css" media="screen">
.fright {
  float: right;
  margin: 0 0 10px 10px;
  clear: right;
}
</style>
<body>
<img class="fright" src="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJ
bWFnZVJlYWR5ccllPAAABOVJREFUeNrsWz1MFEEUfnu75w8ROcEY/IVGpOQKLTT+FTYmBGy09JTW
wsqYWKiFjYnRwhajrRXE0iCHhYUWHJUcNoe/FCCnklNgd8eZvRF2l9m9ndnZn4u85GVzf7sz33zv
ve/N7gGI2R3siPod2/vI5u7XLD+Dfdz2ehF7jv62wPiu13WFLQPpMjL52/T4MI4LahLO0UVXR5Zd
x95tY0KkJoMBBUrjccZnCvW7tveKtveLHuccjItyaQuB2E1GCFSog4RQGLGtfrHBOd2hV8VeSoIB
z7CfpR7WprA/opO5whF646JJU0shK0m+mLCxKpUhULFRtOJKcI2+76ZpyfW9Kg0F92dV13nA5zyb
tmmbFsyUIF/63N9ToOqsmaxy4MXMU1lJ8LJkuRuHkWTZEICgOqDShOwONOagAMw2IQCBxpy4EGpp
l9OOGCsAy0tmZEIoshBQtyiSAECRhsB/nwNSbwihSPcDUq+zjVWxMQcCAAuKarMxIuiYpVSBTG8e
sjcec/8um83CzrY2oWvWHhRAL79dDwEj2hDwa3VTYaYhNlYpSRDVluKf8PwXKefhAcAzptDHD/ED
sLAOgKmjwGMNA8BUakugKT5WaVIYzX8DZffejStVnvQuXaoGRvuOxOjPC4AvrdDCHBMAY3QYzGk2
CKR0a52qlD5AVLnyhEAzbTpGAkDDEGDa9tbUymBeAPxRnZ9jX+DQ4SRksHwGYGnZNB0hz1ilVQET
awFWOlOwTNZgiI2+moGtHdu5r7X6ZsShA0JEADcAJBH2MT/5/Ys9ySN5AOIevcBWgV7AmHnnFEKr
SDhZ8ybBVHSFDXRANUoAvAc1PZmMDDbi6wWITaROBm9sgycSYUC9SV+KdfXjlsIN42vl/jVQWoJr
e13JQHbPFvbKHOiFbZduMiT3V2dC1MPlAJEqAH5tMW9F0hfVcAMzw0n21O4KKx372CXw0/v0hoA2
MATqwFVGR/gEdNwVcq1Mx342y2pOvaEL3hARYgCWmKnvCHklu9QQ8OwIW/g3PdSDvZ4q0NkJxqsD
fCmGFtgAKAIdodKyM1gOdMrgSqIAeCe0TlBPnGfuGLFiP3t80DMJotpPqWOTenvc9NgdJhPXhm6t
lUqyT0ikszn5Gq90K6g9x0A7ctQ6elF/vQpMS6O/KAAkEZ4RVYIkHFTi5y6CpmnQmhN/KNxFf24N
IBoCP6TVeoXv2YAAMvhHHAD4D7IcXVfolsFhO0HREChC/V8dbGk7fA8y+ZPWDdNM/lT4SWPhY8y8
Bb38DvTSmKsTZI4tuST4TwsYL59bblGMAkF2hoKWQ5LorEmXXjnuAEdhkT8kZWV7ullCqoEFBAZF
Jexo27W2ymR1dWvSYxvkridQIe4JruUhkUl97u9BMsBRu3qgdU/WUdq4th++m46Ho7AMVlLHAN8V
nJ0BY1lNcgjCABCq5RIBDa84uRe4uozcOqAaJwDeYkh2DjHqk9aXkXVEpthmTSpDgFlF0L9VxpP+
g6TU+igAuEAZcBrq//LqDrXKOJvrmNZkwownPhs1P+TvNRMg+AyTlOdUcVXopkCcpsAEzg9KBvxo
zco9ZKKj5CjjfqUSBa0wIASEAQpGX8jTlWwTLsoeqxJ1TGMwcjZ2DAZgR4WuMqH1SNQPaUYOAAOQ
PsqMAVslsdM61n3HvwIMAEbY5Ec+KNRqAAAAAElFTkSuQmCC" 
alt="HTML5" width="64" height="64"/>

<h2>Basic R WebSockets Example</h2>
<div id="input">
  <br />
  <table><tr>
  <td>
  <input type="text" id="intext" value="11" size="20" maxlength="20"/>
  </td><td>
  <input type=button id="send" value="SEND" onclick="hello();"/>
  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
  </td>
  <td id="statustd">
  <div id="wsdi_status"> Connection not initialized </div>
  </td></tr></table>
</div>
<hr />
<div id="istat"></div>
<br />
<div id="output"></div>
<div style='width:90%' id='blurb'>
<p />
The websockets package is a native HTML 5 Websocket implementation for the R
language. The package provides functions for setting up websocket servers and
clients in R.  It's especially well-suited to lightweight interaction between R
and web scripting languages like Javascript.  Multiple simultaneous websocket
connections are supported.
<p />
The library has few external dependencies and is easily portable. More
significantly, websockets lets Javascript and other scripts embedded in web
pages directly interact with R, bypassing traditional middleware layers like
.NET, Java, and web servers normally used for such interaction.
Although not its primary function, the package can serve basic
HTTP web pages like this one.
<p />
The HTML 5 Websocket API is a modern socket-like communication protocol for the
web. It can be much more efficient than Ajax and other polling methods. Note
that the HTML 5 Websocket API is still under development and may change.  Some
browsers may not enable Websockets by default and/or have quirky
implementations (especially versions of Firefox), but there are usually simple
methods to enable the API.  Despite its developmental status, the API is
presently widely supported: most recent browsers support it and there are many
available langauge implementations.
<p />
This simple example illustrates a few features of websockets.
To see other available demos, run the following in your R session:
<pre>
demo(package='websockets')
</pre>
</ul>
</div>

<script>
String.prototype.startsWith = function(str){return (this.indexOf(str) === 0);}

var socket;
try {
  socket = new WebSocket("ws://" + window.location.host, "chat");

  socket.onopen = function() {
    document.getElementById("wsdi_status").textContent =
      " websocket connection opened ";
    document.getElementById("statustd").style.backgroundColor = "#40ff40";
  } 

  socket.onmessage = function got_packet(msg) {
    if(msg.data.startsWith("Connection")) {
      document.getElementById("istat").textContent = msg.data;
    } 
    else document.getElementById("output").textContent = msg.data;
  } 

  socket.onclose = function(){
    document.getElementById("wsdi_status").textContent =
      " websocket connection CLOSED ";
    document.getElementById("statustd").style.backgroundColor = "#ff4040";
  }
}
catch(ex) {document.getElementById("output").textContent = "Error: " + ex;}

function hello() {
  socket.send(document.getElementById("intext").value);
}

</script>

<br /><br />
websockets package Copyright (C) 2011 by Bryan W. Lewis, &lt;blewis@illposed.net&gt;, package licensed under GNU LGPL v3.
<br />
</body>
</html>
